source("M4R_Clustering/R/CF.r")
source("M4R_Clustering/R/Metrics.r")
source("M4R_Clustering/R/Predictors.r")

u100k <- read.table("M4R_Clustering/Data/u.data",
                    col.names = c("userID", "filmID", "rating", "timestamp"))

t1 <- Sys.time()
f_ind <- t_fold_index(u100k, 10)
f <- t_fold(u100k, f_ind)
t2 <- Sys.time()

t1 <- Sys.time()
ui <- gen_ui_matrix(u100k, f[[1]])
t2 <- Sys.time()

# t1 <- Sys.time()
# sim <- gen_cos_sim((ui))
# t2 <- Sys.time()

# t1 <- Sys.time()
# sim <- gen_acos_sim((ui))
# t2 <- Sys.time()

# t1 <- Sys.time()
# pred_fold(u100k, f_ind[[1]], ui, sim, z_score, 10)
# t2 <- Sys.time()

m <- matrix(NA, 5, 5)
m[1, ] <- c(5, 3, 4, 4, NA)
m[2, ] <- c(3, 1, 2, 3, 3)
m[3, ] <- c(4, 3, 4, 3, 5)
m[4, ] <- c(3, 3, 1, 5, 4)
m[5, ] <- c(1, 5, 5, 2, 1)

m2 <- matrix(NA, 5, 9)
m2[1, ] <- c(1, 2, NA, 3, 2, NA, 2, NA, NA)
m2[2, ] <- c(2, 4, 4, NA, 4, NA, NA, 2, 3)
m2[3, ] <- c(5, 5, NA, 4, NA, 4, 3, NA, 4)
m2[4, ] <- c(5, NA, 5, 4, 4, NA, 4, 4, NA)
m2[5, ] <- c(1, NA, NA, NA, 2, NA, NA, NA, 2)

print(t2 - t1)

       rmse      mae        r2
1  2.009923 1.355748 0.5345478
2  1.970909 1.373255 0.5442530
3  1.950704 1.384266 0.5496345
4  1.941494 1.393823 0.5523792
5  1.932260 1.397374 0.5569425
6  1.923073 1.396601 0.5636506
7  1.917573 1.396481 0.5699865
8  1.914255 1.396754 0.5748565
9  1.906737 1.393886 0.5822093
10 1.898490 1.389908 0.5913659
11 1.894297 1.387706 0.5970383
12 1.890829 1.385226 0.6009323
13 1.885355 1.380896 0.6065940
14 1.880679 1.377618 0.6131944
15 1.877777 1.375409 0.6177308
16 1.875835 1.373807 0.6214217
17 1.872590 1.370847 0.6257216
18 1.870689 1.368370 0.6294219
19 1.866149 1.364612 0.6346698
20 1.862860 1.361243 0.6387605
21 1.861997 1.359734 0.6400630
22 1.859614 1.357533 0.6433529
23 1.858748 1.356322 0.6441600
24 1.856707 1.354475 0.6469948
25 1.855705 1.353392 0.6485309
26 1.853508 1.351411 0.6505900
27 1.851817 1.349845 0.6523534
28 1.850011 1.348541 0.6548469
29 1.848555 1.347070 0.6572000
30 1.847129 1.345879 0.6585007